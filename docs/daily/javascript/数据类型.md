# 数据类型

[[toc]]

## 动态类型

::: details JavaScript 是一门 弱类型/动态语言;
不用提前声明变量的类型,在程序运行的过程中,类型会被自动确定.
:::

## 数据类型

最新的 ECMAScript 标准定义了 8 种数据类型

### 原始类型

- Boolean
- Null
- Undefined
- Number
- BigInt
- String
- Symbol

### 引用类型

- Object

## 原始值 (Primitive values)

除 Object 以外的所有类型都是不可变的(值本身无法被改变), 这些类型的值被称为 `原始值`

### 布尔类型

`true`、 `false`

### Null 类型

`null`

### Undefined 类型

`undefined`

### 数字类型

- 基于 IEEE754 标准(浮点数算术标准)的双精度 64 位二进制格式的值(-2<sup>53</sup>-1 ~ 2<sup>53</sup>-1)

- `+Infinity`

- `-Infinity`

- `NaN`

检测是否大于 `+/-Infinity`

```js
// 最大值
Number.MAX_VALUE
// 最小值
Number.MIN_VALUE
// ES 6
Number.isSafeInteger()
Number.MAX_SAFE_INTEGER
Number.MIN_SAFE_INTEGER
;+0 === -0 // true

12138 / +0 // Infinity

12138 / -0 // -Infinity
```

### BigInt 类型

用任意精度表示整数. 使用 BigInt 可以安全的存储和操作大整数.

```js
// a = 9007199254740992n
const a = 2n ** 53n

// c = 9007199254753130n
const c = a + BigInt(12138)

typeof a // bigint
```

::: danger
BigInt 类型不能与数字互相操作, 否则将会抛出 TypeError.
:::

::: tip
BigInt 类型转换成为 Boolean 时, 行为类似于一个数字.
:::

### 字符串类型

用于表示文本数据.

### 符号类型

符号 (Symbols) 是 ECMAScript 第六版新定义的,符号类型是唯一的并且是不可修改的.

## 对象

- Object
- Array
- RegExp
- Date
- Math
- Function

### 属性

- 一组属性的集合。
- ECMAScript 定义的对象中有两种属性：数据属性和访问器属性。

#### 数据属性

键值对, 且每个数据属性拥有以下特性:

- `[[value]]` 属性的数据值
- `[[writable]]` 属性的值是否可以改变
- `[[enumerable]]` 属性是否可以用 for...in 循环进行枚举
- `[[configurable]]` 该属性是否可以删除, 是否可以更改 `value`、`writable` 以外的特性

#### 访问器属性

访问器属性有一个或两个访问器函数 (get 和 set) 来存取数值，并且有以下特性:

- `[[get]]` 一个没有参数的函数，**在读取属性时工作**
- `[[set]]` 带有一个参数的函数，**当属性被设置时调用**
- `[[enumerable]]` 属性是否可以用 for...in 循环进行枚举
- `[[configurable]]` 该属性是否可以删除, 是否可以转变成一个数据属性

::: tip
注意：这些特性只有 JavaScript 引擎才用到，因此不能直接访问它们。所以特性被放在两对方括号中，而不是一对。
:::

<!-- <javascript-get /> -->

## typeof 操作符判断对象类型

```js
typeof undefined // 'undefined'
typeof true // 'boolean'
typeof 12138 // 'number'
typeof 1n // 'bigint'
typeof "string" // 'string'
typeof Symbol() // 'symbol'
typeof class C {} // 'function'
typeof Array.prototype.forEach // 'function'

// AnyOtherObject => 'object'
typeof null // 'object'
typeof new Boolean(true) // 'object'
```

| 运算参数                                             |                    例子                    |      返回值 |
| ---------------------------------------------------- | :----------------------------------------: | ----------: |
| 数字直接量/Infinity                                  |       `typeofof 1` `typeof Infinity`       |    'number' |
| 字符串直接量                                         |              `typeof 'demo'`               |    'string' |
| 布尔值直接量                                         |               `typeof true`                |   'boolean' |
| Symbol                                               | `typeof Symbol()` `typeof Symbol.iterator` |    'symbol' |
| 函数/Class/Number/String/Boolean/Array/Symbol/Object |           `typeof function(){}`            |  'function' |
| undefined                                            |             `typeof undefined`             | 'undefined' |
| null/对象直接量/封装了基本类型值的封装对象/Math      |   `typeof new String('1')` `typeof null`   |    'object' |

::: tip
通过构造函数创建出来的是封装了基本类型值的封装对象
:::

::: details typeof null === 'object'?
[2ality – JavaScript and more](https://2ality.com/2013/10/typeof-null.html)

在 JavaScript 最初的实现中，JavaScript 中的值,是由一个表示`类型的标签`和`实际数据值`表示的。对象的类型标签是 0。由于 null 代表的是空指针（大多数平台下值为 0x00），因此，null 的类型标签是 0，typeof null 也因此返回 "object"。
:::

::: details typeof iData + ' Wisen' 与 typeof (iData + ' Wisen') 的区别?
括号有无将决定表达式的类型
:::

::: details typeof document.all === 'undefined'?
[typeof document.all === 'undefined'](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#null)
当前所有的浏览器都暴露了一个类型为 undefined 的非标准宿主对象 document.all。

尽管规范允许为非标准的外来对象自定义类型标签，但它要求这些类型标签与已有的不同。document.all 的类型标签为 'undefined' 的例子在 Web 领域中被归类为对原 ECMA JavaScript 标准的“故意侵犯”。
:::

::: details typeof (function(){}) === 'function'?
函数是“可调用对象”

function 本质上也是一个对象，但是 function 对象与普通对象相比，其内部有一个[[Call]]方法，用来表示这个对象是可调用的，typeof 操作符在判断 Object 时，如果内部实现了[[Call]]方法,就返回 function。
:::
