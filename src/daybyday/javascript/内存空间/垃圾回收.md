---
title: 垃圾回收
date: 2020-03-10
tags:
  - JavaScript
  - 内存空间
author: Day
---

# 垃圾回收

垃圾回收算法主要依赖于引用的概念.

- 显示引用(属性引用)
- 隐性引用((JavaScript 对象、函数作用域、全局词法作用域)对于原型的引用)

## 引用计数

最初级的垃圾收集算法,将 **对象是否不再需要** 定义为 **对象没有其他对象引用**. 如果没有引用指向那个该对象(零引用),对象将被垃圾回收机制回收

**无法处理循环引用, 若未移除其一引用, 其占用的内存将永远不会得到释放.**

```js
var div;
window.onload = function() {
  div = document.getElementById("myDivElement");
  div.circularReference = div;
  div.lotsOfData = new Array(10000).join("*");
};
```

## 标记清除

将 `对象是否不再需要` 定义为 `对象是否可以获得`

假定设置一个叫做根(`root`)的对象(JavaScript's 全局对象), 垃圾回收器将定期从根开始, 找所有从根开始引用的对象, 然后找这些对象引用的对象...从根开始, 垃圾回收器将找到所有可以获得的对象和收集所有不能获得的对象.

**那些无法从根对象查询到的对象都将被清除.**
